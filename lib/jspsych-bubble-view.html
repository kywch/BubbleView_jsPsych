<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="./bubble_view.css">
  </link>

  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="./jspsych.js"></script>
  <script src="./jspsych-bubble-view.js"></script>
  <script src="./jspsych-instructions.js"></script>
  <script src="./jspsych-fullscreen.js"></script>
  <script src="./jspsych-survey-text.js"></script>
  <script src="./jspsych-single-image.js"></script>
  <script src="./jspsych-html-button-response.js"></script>
  <script src="./bubble_view.js"></script>
</head>

<body></body>
<script>
  // set the display stage
  $('<div class = display_stage_background></div>').appendTo('body');
  $('<div class = display_stage></div>').appendTo('body');

  sbjId = "test";
  data_dir = "data01";

  // stimulus definition
  // for the images that have 'a' in the fourth place, we will ask Ps to describe those
  var pracImg_src = 'https://users.rcc.uchicago.edu/~kywch/Bubble_201904/imgs_prac/';
  var pracImg_ext = 'png';
  var pracImg_set = ["bxba7", "bxbf13", "bxbv1", "wxwa9", "wxwf3", "wxwv3"];
  var pracImg_attn = ["wxwa9"];
  var mainImg_src = 'https://users.rcc.uchicago.edu/~kywch/Bubble_201904/imgs_main01/';
  var mainImg_ext = 'png';
  var mainImg_set = [
    "bxba2", "bxba3", "bxba4", "bxba5", "bxba6", "bxba8", "bxba13", "bxba15",
    "bxbf2", "bxbf3", "bxbf5", "bxbf6", "bxbf7", "bxbf11", "bxbf12", "bxbf14",
    "bxbv2", "bxbv4", "bxbv5", "bxbv6", "bxbv8", "bxbv9", "bxbv10", "bxbv11",
    "wxwa1", "wxwa2", "wxwa5", "wxwa10", "wxwa11", "wxwa12", "wxwa13", "wxwa15",
    "wxwf4", "wxwf5", "wxwf6", "wxwf7", "wxwf8", "wxwf9", "wxwf11", "wxwf12",
    "wxwv6", "wxwv7", "wxwv8", "wxwv10", "wxwv11", "wxwv12", "wxwv13", "wxwv15",
    "pxba1", "pxba2", "pxba8", "pxba9", "pxba12", "pxba13", "pxba14", "pxba15",
    "pxbf3", "pxbf4", "pxbf7", "pxbf10", "pxbf11", "pxbf12", "pxbf14", "pxbf15",
    "pxbv2", "pxbv3", "pxbv4", "pxbv6", "pxbv7", "pxbv9", "pxbv10", "pxbv13"
  ];
  var mainImg_attn = [
    "bxba4", "bxba5", "bxba6", "bxba8", "wxwa2", "wxwa12", "wxwa13", "wxwa15",
    "pxba1", "pxba2", "pxba9", "pxba12"
  ];



  var jspsych_session = [];

  // use the full screen
  jspsych_session.push({
    type: 'fullscreen',
    fullscreen_mode: true
  });

  jspsych_session.push(bubble_instructions_page);

  jspsych_session.push({
    timeline: generate_practice_block(pracImg_src, shuffle(pracImg_set), pracImg_ext, pracImg_attn)
  });

  /*
  jspsych_session.push({
    timeline: generate_main_block(mainImg_src, shuffle(mainImg_set), mainImg_ext, mainImg_attn)
  });
  */

  // exit the full screen
  jspsych_session.push({
    type: 'fullscreen',
    fullscreen_mode: false
  });

  jsPsych.init({
    timeline: jspsych_session,
    display_element: document.querySelector('.display_stage'),
    on_finish: function () {
      if (flag_debug) {
        //jsPsych.data.displayData();
        //jsPsych.data.get().localSave('json', 'bubble_session.json');
      }
    }
  });
</script>

</html>


</script>

</html>
